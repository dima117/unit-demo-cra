# Инфраструктура

ТГ для связи - [@q2een_dev](https://t.me/q2een_dev)

## Логика ci

### PR
* eslint + commitlint для коммитов в текущем PR
* e2e тесты - результат сохраняется в артифакты 
* модульные тесты

yml - pull-request.yml

### Release
* срабатывает на тег вида `v<число>` или на пуш в ветку с именем `releases/v<число>`
* если событие - пуш тега - создается/обновляется issue, содержащее информацию о релизе - changelog, автор, дата, версия релиза, релизная ветка
* если событие - пуш в релизную ветку - в существующий issue добавляется комментарий c чейнджлогом на основе коммитов в данном пуше
* выполняются шаги, идентичные PR
* в issue релиза пишется комментарий со ссылкой на workflow и текстом успешности выполнения workflow
* если все тесты пройдены - деплой приложения
* в issue добаляется комментарий о результате деплоя. Если успех - закрывается issue=-0



В этом репозитории находится пример приложения с тестами:

- [e2e тесты](e2e/example.spec.ts)
- [unit тесты](src/example.test.tsx)

Для запуска примеров необходимо установить [NodeJS](https://nodejs.org/en/download/) 16 или выше.

Как запустить:

```sh
# установить зависимости
npm ci

# запустить приложение
npm start
```

Как запустить e2e тесты:

```sh
# скачать браузеры
npx playwright install

# запустить тесты
npm run e2e
```

Как запустить модульные тесты:

```sh
npm test
```
