# Отчёт о выполненной работе

## Commits

Для валидации сообщений коммитов используется [git-commit-msg-linter](https://www.npmjs.com/package/git-commit-msg-linter). Настройки пакета не требуется, всё запускается автоматически после установки.

Рекомендуемый формат сообщения:

```
<type>(<scope?>): <short summary>
```

где:

- `type` - тип коммита, например *feat|fix|docs|style|refactor|test|chore|perf|ci|build|temp*;
- `scope` - область коммита, опционально, может быть чем угодно, например *CHANGELOG|compiler|README*;
- `short summary` - краткое описание, текст в строчном регистре, без точки в конце.

Примеры:

- Плохой: `Correct spelling of CHANGELOG`;
- Хороший: `docs: correct spelling of CHANGELOG`;
- Отличный: `docs(CHANGELOG): correct spelling`.

## Linting

Для проекта добавлен и настроен `eslint`. Настройки были вынесены из `package.json` и перенесены в `.eslintrc.json`. Дополнительно добавлены исключения для тестовых файлов (модульных, так и интеграционных).

Для запуска процесса проверки необходимо воспользоваться командой:

```
pnpm run lint
```

## Tests

Для тестов используется экшен `test.yaml`.

Данный экшен запускатся на каждый pull_request или push.

Экшен состоит из трёх этапов. Первый необходим для скачивания зависимостей проекта и создания кэша. Второй и третий этапы - прогонка модульных и интеграционных тестов соответственно - запускаются параллельно, используя закэшированные зависимости.

После завершения тестов генерируются артефакты с отчётом об итогах тестирования.

## Build & Deploy

Для сборки приложения используется экшен `build-and-deploy.yaml`.

Данный экшен запускается при изменениях в основной `master` ветке. Предварительно экшен запускает `test.yaml` для прогонки тестов и после успешного тестирования проводит сборку приложения, генерируя артефакт.

После успешной сборки проект деплоится на [Github Pages](https://ericrovell.github.io/shri-hw-infrastructure/).

## Release

Для выпуска релизов используется экшен `release.yaml`.

Данный экшен запускается при добавлении в репозиторий тэгов по схеме `v[0-9]+`.

В процессе отводится ветка с именем `release-v{version}`, открывается соответственный релизный issue с пометкой `release`. В issue отображается автор изменений, версия приложения, время выпуска и список изменений.

Для необходимых прав доступа экшен требует секрета `PERSONAL_ACCESS_TOKEN`, сгенерированный для аккаунта владельца репозитория.

К сожалению, не разобрался, как можно автоматически закрыть issue при успешном деплое и тестировании.
